
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Configuring Mojito</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Shaker</span></a></h1>
      </div>
      <div class="topnav">
      
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="index.html" title="Shaker">Shaker</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_mvc.html">MVC in Mojito</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_binders.html">Mojito Binders</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="configuring-mojito">
<h1>Configuring Mojito<a class="headerlink" href="#configuring-mojito" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-information">
<h2>Basic Information<a class="headerlink" href="#basic-information" title="Permalink to this headline">¶</a></h2>
<p>Mojito can be configured at the framework, application, and mojit levels. Each level is configured differently, but uses same general file format consisting of JSON.</p>
</div>
<div class="section" id="file-format">
<h2>File Format<a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h2>
<p>All configuration files in Mojito have a general top-level structure and are <a class="reference external" href="http://twiki.corp.yahoo.com/view/TrailBlazers/YcbLibrary#Configuration_File_Formats">YCB files</a> in JSON format. At the top level of each configuration file is an array. Each item of the array is  an object that configures one component of Mojito, such as logging, assets, mojits, static resources, etc.</p>
<p>Each configuration object is required to have a <tt class="docutils literal"><span class="pre">settings</span></tt> field that specifies  conditions for applying the configuration settings. These conditions could be used to determine the
configurations in different  environments.</p>
<p>Below is the skeleton of a configuration file. See <a class="reference internal" href="#application-configuration">Application Configuration</a> and <a class="reference internal" href="#mojit-configuration">Mojit Configuration</a> for details about specific configuration files.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="c1">// Configuration object</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="application-configuration">
<span id="configure-mj-app"></span><h2>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h2>
<p>Both the server and client runtimes of an application can be configured. The application is configured in the <tt class="docutils literal"><span class="pre">application.json</span></tt> file in the application directory.
The file consists of an array of zero or more <tt class="docutils literal"><span class="pre">configuration</span></tt> objects. Using the <tt class="docutils literal"><span class="pre">configuration</span></tt> object, you can configure the following for your application:</p>
<ul class="simple">
<li>port number</li>
<li>location of routing files</li>
<li>path to static assets</li>
<li>YUI 3</li>
<li>URL path for client and server communication</li>
<li>declare mojit instances</li>
<li>logging</li>
<li>static resources</li>
</ul>
<p>The tables below describe the <tt class="docutils literal"><span class="pre">configuration</span></tt> object and its fields. Those fields that have object values have tables below describing their fields as well
except the <tt class="docutils literal"><span class="pre">config</span></tt> object, which is user defined.</p>
<div class="section" id="configuration-object">
<span id="app-configuration-obj"></span><h3>configuration Object<a class="headerlink" href="#configuration-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="14%" />
<col width="12%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">appPort</span></tt></td>
<td>number</td>
<td>8666</td>
<td>The port number (1-65355) that the application
will use.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#builds-obj"><em>builds Object</em></a></td>
<td>object</td>
<td>N/A</td>
<td>Specifies configuration for builds.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cacheViewTemplates</span></tt></td>
<td>boolean</td>
<td>true</td>
<td>Specifies whether the view engine should attempt
to cache the view. Note that not all view engines
support caching.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">deferAllOptionalAutoloads</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>Specifies whether optional YUI modules found in
the <tt class="docutils literal"><span class="pre">/autoload/</span></tt> directories are not shipped to
the client. This is an optimization setting and
should generally only be set if you are building
an offline application.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">embedJsFilesInHtmlFrame</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When Mojito is deployed to the client, this field
specifies whether the body of the JavaScript files
should be embedded in the HTML page.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">log</span></tt></td>
<td>object</td>
<td>N/A</td>
<td>Specifies the configuration for the logging
subsystem. The configuration is given
independently for the two different runtimes.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">middleware</span></tt></td>
<td>array of strings</td>
<td>[]</td>
<td>A list of paths to the Node.js module that exports
a Connect middleware function.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">mojitDirs</span></tt></td>
<td>array of strings</td>
<td>[]</td>
<td>The list of directories specifying where to find a
single mojit type. The mojits specified by
<tt class="docutils literal"><span class="pre">mojitDirs</span></tt> are loaded after the mojits in
<tt class="docutils literal"><span class="pre">mojitsDirs</span></tt>. If a directory doesn&#8217;t start with
a &#8220;/&#8221;, it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mojitsDirs</span></tt></td>
<td>array of strings</td>
<td>[&#8216;mojits&#8217;]</td>
<td>The list of directories specifying where to find
mojit types. If a directory doesn&#8217;t start with a
&#8220;/&#8221;, it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">routesFiles</span></tt></td>
<td>array of strings</td>
<td>[&#8216;routes.json&#8217;]</td>
<td>The list of files specifying where to find routing
information. If a file doesn&#8217;t start with a &#8220;/&#8221;,
it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">settings</span></tt></td>
<td>array of strings</td>
<td>[&#8220;master&#8221;]</td>
<td>Defines the context of the configuration. The
context consists of a key-value pair that can
specify the environment and environment
configurations. These key-value pair corresponds
to the configuration objects that are elements of
the <tt class="docutils literal"><span class="pre">dimensions``array</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">``dimensions.json</span></tt>
file. For example, the following contexts could be
used to specify the testing environment and the
English language : <tt class="docutils literal"><span class="pre">&quot;environment:testing&quot;</span></tt>,
<tt class="docutils literal"><span class="pre">&quot;lang:en&quot;</span></tt>. See <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shareYUIInstance</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>Specifies whether the use of a single shared YUI
instance is enabled. Normally, each mojit runs in
its own YUI instance. To use the shared YUI
instance, each mojit has to be configured to use
the shared instance.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#app-specs-obj"><em>specs Object</em></a></td>
<td>object</td>
<td>N/A</td>
<td>Specifies the mojit instances. See the
<a class="reference internal" href="#app-specs-obj"><em>specs Object</em></a> for details.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#app-statichandling-obj"><em>staticHandling Object</em></a></td>
<td>object</td>
<td>N/A</td>
<td>Gives details on the handling of static resources.
See the <a class="reference internal" href="#app-statichandling-obj"><em>staticHandling Object</em></a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">tunnelPrefix</span></tt></td>
<td>string</td>
<td>&#8220;/tunnel/&#8221;</td>
<td>The URL prefix for the communication tunnel
from the client back to the server.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#app-yui-obj"><em>yui Object</em></a></td>
<td>object</td>
<td>N/A</td>
<td>When Mojito is deployed to client, the
<a class="reference internal" href="#app-yui-obj"><em>yui Object</em></a> specifies where
and how to obtain YUI 3.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="builds-object">
<span id="builds-obj"></span><h3>builds Object<a class="headerlink" href="#builds-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="19%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#html5app-obj"><em>html5app Object</em></a></td>
<td>object</td>
<td>Specifies configuration for HTML5 apps
created with <tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">build</span> <span class="pre">html5app</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="html5app-object">
<span id="html5app-obj"></span><h3>html5app Object<a class="headerlink" href="#html5app-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="14%" />
<col width="10%" />
<col width="14%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">attachManifest</span></tt></td>
<td>boolean</td>
<td>no</td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, the <tt class="docutils literal"><span class="pre">manifest</span></tt>
attribute is added to <tt class="docutils literal"><span class="pre">&lt;html&gt;</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">forceRelativePaths</span></tt></td>
<td>boolean</td>
<td>no</td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, the server-relative paths
(those starting with &#8220;/&#8221;) are converted
into paths relative to the generated
file.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">urls</span></tt></td>
<td>array of
strings</td>
<td>yes</td>
<td>none</td>
<td>Lists the routing paths to views that
be rendered into static pages and then
cached so that the page can be viewed
offline. For example, if the running
application renders the view
<tt class="docutils literal"><span class="pre">view.html</span></tt>, you could configure the
application to statically create and
cache <tt class="docutils literal"><span class="pre">view.html</span></tt> in
<tt class="docutils literal"><span class="pre">{app_dir}/artifacts/builds/html5app</span></tt>
using the following:
<tt class="docutils literal"><span class="pre">urls:</span> <span class="pre">[</span> <span class="pre">'/view.html']</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="log-object">
<h3>log Object<a class="headerlink" href="#log-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="20%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">client</span></tt></td>
<td>object</td>
<td>The log configuration for the client.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">server</span></tt></td>
<td>object</td>
<td>The log configuration for the server.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="server-client-object">
<h3>server/client Object<a class="headerlink" href="#server-client-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="17%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">buffer</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>Determines whether Mojito should buffer log
entries (<tt class="docutils literal"><span class="pre">true</span></tt>) or output each as they occur
(<tt class="docutils literal"><span class="pre">false</span></tt>).</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">defaultLevel</span></tt></td>
<td>string</td>
<td>&#8220;info&#8221;</td>
<td>Specifies the default log level to log entries. See
<a class="reference external" href="../topics/mojito_logging.html#log-levels">Log Levels</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">level</span></tt></td>
<td>string</td>
<td>&#8220;info&#8221;</td>
<td>Specifies the lowest log level to include in th
log output. See
<a class="reference external" href="../topics/mojito_logging.html#log-levels">Log Levels</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">maxBufferSize</span></tt></td>
<td>number</td>
<td>1024</td>
<td>If <tt class="docutils literal"><span class="pre">buffer</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>, specifies the
number of log entries to store before flushing to
output.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">timestamp</span></tt></td>
<td>boolean</td>
<td>true</td>
<td>Determines whether the timestamp is included in
the log output.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">yui</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>Determines whether the log entries generated by
the YUI framework should be included in the Mojito
log output.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="specs-object">
<span id="app-specs-obj"></span><h3>specs Object<a class="headerlink" href="#specs-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="13%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">action</span></tt></td>
<td>string</td>
<td>Specifies a default action to use if the mojit instance wasn&#8217;t
dispatched with one. If not given and the mojit wasn&#8217;t dispatched
with an explicit action, the action defaults to <tt class="docutils literal"><span class="pre">index</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">base</span></tt></td>
<td>string</td>
<td>Specifies another mojit instance to use as a &#8220;base&#8221;. Any changes
in this instance will override those in the base. Only mojit
instances with an ID can be used as a base, and only mojit
instances specified at the top-level of the <tt class="docutils literal"><span class="pre">specs</span></tt> object in
<tt class="docutils literal"><span class="pre">application.json</span></tt> have an ID. The ID is the instance&#8217;s name in
the <tt class="docutils literal"><span class="pre">specs</span></tt> object. Either the <tt class="docutils literal"><span class="pre">type</span></tt> or <tt class="docutils literal"><span class="pre">base</span></tt> field is
required in the <tt class="docutils literal"><span class="pre">specs</span></tt> object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#app-config-obj"><em>config Object</em></a></td>
<td>object</td>
<td>This is user-defined information that allows you to configure the
controller. Mojito does interpret any part of this object. You can
access your defined <tt class="docutils literal"><span class="pre">config</span></tt> in the controller using the <a class="reference external" href="../../../mojito_api/Y.mojito.lib.Config.common.html">Config
addon</a>.
For example: <tt class="docutils literal"><span class="pre">ac.config.get('message')</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">defer</span></tt></td>
<td>boolean</td>
<td>If true and the mojit instance is a child of the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>,
an empty node will initially be rendered and then content will be
lazily loaded. See
<a class="reference external" href="../topics/mojito_framework_mojits.html#lazyloadmojit">LazyLoadMojit</a>
for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">proxy</span></tt></td>
<td>object</td>
<td>This is a normal mojit spec to proxy this mojit&#8217;s execution
through. This feature only works when defined within a child
mojit. When specified, Mojito will replace this mojit child with a
mojit spec of the specified type, which is expected to handle the
child&#8217;s execution itself. The proxy mojit will be executed in
place of the mojit being proxied. The original proxied child mojit
spec will be attached as a <em>proxied</em> object on the proxy mojit&#8217;s
`config` for it to handle as necessary.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">shareYUIInstance</span></tt></td>
<td>boolean</td>
<td>Determines whether the mojit should use the single shared YUI
instance. To use the single shared YUI instance, the
<tt class="docutils literal"><span class="pre">shareYUIInstance</span></tt> in <tt class="docutils literal"><span class="pre">application.json``must</span> <span class="pre">be</span> <span class="pre">set</span> <span class="pre">to</span>
<span class="pre">``true</span></tt>. The default value is <tt class="docutils literal"><span class="pre">false</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">type</span></tt></td>
<td>string</td>
<td>Specifies the mojit type. Either the <tt class="docutils literal"><span class="pre">type</span></tt> or <tt class="docutils literal"><span class="pre">base</span></tt> field is
required in the <tt class="docutils literal"><span class="pre">specs</span></tt> object.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="config-object">
<span id="app-config-obj"></span><h3>config Object<a class="headerlink" href="#config-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">child</span></tt></td>
<td>object</td>
<td>Contains the <tt class="docutils literal"><span class="pre">type</span></tt> field that specifies mojit type and may also
contain a <tt class="docutils literal"><span class="pre">config</span></tt> object.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">children</span></tt></td>
<td>object</td>
<td>Contains one or more mojit instances that specify the mojit type with
the field <tt class="docutils literal"><span class="pre">type</span></tt>. Each mojit instance may also contain a <tt class="docutils literal"><span class="pre">config</span></tt>
objects.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">deploy</span></tt></td>
<td>boolean</td>
<td>If set to <tt class="docutils literal"><span class="pre">true</span></tt>, Mojito application code is deployed to the client.
See <a class="reference internal" href="#deploy-app"><em>Configuring Applications to Be Deployed to Client</em></a> for details. The default value is <tt class="docutils literal"><span class="pre">false</span></tt>. Your
mojit code will only be deployed if it is a child of <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">title</span></tt></td>
<td>string</td>
<td>If application is using the framework mojit <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>,
the value will be used for the HTML <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> element.
See <a class="reference external" href="../topics/mojito_framework_mojits.html#htmlframemojit">HTMLFrameMojit</a>
for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{key}</span></tt></td>
<td>any</td>
<td>The <tt class="docutils literal"><span class="pre">{key}</span></tt> is user defined and can have any type of configuration value.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="statichandling-object">
<span id="app-statichandling-obj"></span><h3>staticHandling Object<a class="headerlink" href="#statichandling-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="24%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">appName</span></tt></td>
<td>string</td>
<td>{application-directory}</td>
<td>Specifies the path prefix for assets that
originated in the application directory, but which
are not part of a mojit.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">cache</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, Mojito caches files in memory
indefinitely until they are invalidated by a
conditional GET request. When given <tt class="docutils literal"><span class="pre">maxAge</span></tt>,
Mojito caches file for the duration given by
<tt class="docutils literal"><span class="pre">maxAge</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">frameworkName</span></tt></td>
<td>string</td>
<td>&#8220;mojito&#8221;</td>
<td>Specifies the path prefix for assets that
originated from Mojito, but which are not part of
a mojit.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">maxAge</span></tt></td>
<td>number</td>
<td>0</td>
<td>The time in milliseconds that the browser should
cache.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">prefix</span></tt></td>
<td>string</td>
<td>&#8220;static&#8221;</td>
<td>The URL prefix for all statically served assets.
Specified as a simple string and wrapped in &#8220;/&#8221;.
For example <tt class="docutils literal"><span class="pre">&quot;static&quot;</span></tt> becomes the URL prefix
<tt class="docutils literal"><span class="pre">/static/</span></tt>. An empty string can be given if no
prefix is desired.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">useRollups</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When true, the client will use the rollup file (if
it exists) to load the YUI modules in the mojit.
The command <a class="reference external" href="../reference/mojito_cmdline.html#compiling-rollups">mojito compile rollups</a> can be used
to generate the rollups.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="yui-object">
<span id="app-yui-obj"></span><h3>yui Object<a class="headerlink" href="#yui-object" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="#example-application-configurations">Example Application Configurations</a> for an example of the <tt class="docutils literal"><span class="pre">yui</span></tt> object. For options for the <tt class="docutils literal"><span class="pre">config</span></tt> object, see the
<a class="reference external" href="http://yuilibrary.com/yui/docs/api/classes/config.html">YUI config Class</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="17%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">base</span></tt></td>
<td>string</td>
<td>Specifies the prefix from which to load all YUI 3 libraries.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">config</span></tt></td>
<td>object</td>
<td>Used to populate the <a class="reference external" href="http://yuilibrary.com/yui/docs/yui/#yui_config">YUI_config</a> global variable that allows you to configure every YUI
instance on the page even before YUI is loaded. For example, you can
configure YUI not to load its default CSS with the following:
<tt class="docutils literal"><span class="pre">&quot;yui&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;config&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;fetchCSS&quot;:</span> <span class="pre">false</span> <span class="pre">}</span> <span class="pre">}</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dependencyCalculations</span></tt></td>
<td>string</td>
<td>Specifies whether the YUI module dependencies are calculated at
server startup (pre-computed) or deferred until a particular
module is needed (on demand). The following are the two allowed
values: <tt class="docutils literal"><span class="pre">precomputed</span></tt>, <tt class="docutils literal"><span class="pre">ondemand</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">extraModules</span></tt></td>
<td>array of strings</td>
<td>Specifies additional YUI library modules that should be added to
the page when Mojito is sent to the client.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">loader</span></tt></td>
<td>string</td>
<td>Specifies the path (appended to <tt class="docutils literal"><span class="pre">base</span></tt> above) for the loader to
use.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">showConsoleInClient</span></tt></td>
<td>boolean</td>
<td>Determines if the YUI debugging console will be shown on the
client.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">url</span></tt></td>
<td>string</td>
<td>Specifies the location of the <a class="reference external" href="http://yuilibrary.com/yui/docs/yui/#base-seed">YUI 3 seed file</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">urlContains</span></tt></td>
<td>array of strings</td>
<td>Specifies the YUI modules that are delivered by <tt class="docutils literal"><span class="pre">url</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-applications-to-have-multiple-mojits">
<span id="config-multiple-mojits"></span><h3>Configuring Applications to Have Multiple Mojits<a class="headerlink" href="#configuring-applications-to-have-multiple-mojits" title="Permalink to this headline">¶</a></h3>
<p>Applications not only can specify multiple mojit instances in <tt class="docutils literal"><span class="pre">application.json</span></tt>, but mojits can have one or more child mojits as well.</p>
<div class="section" id="application-with-multiple-mojits">
<h4>Application With Multiple Mojits<a class="headerlink" href="#application-with-multiple-mojits" title="Permalink to this headline">¶</a></h4>
<p>Your application configuration can specify multiple mojit instances of the same or different types in the <tt class="docutils literal"><span class="pre">specs</span></tt> object. In the example
<tt class="docutils literal"><span class="pre">application.json</span></tt> below, the mojit instances <tt class="docutils literal"><span class="pre">sign_in</span></tt> and <tt class="docutils literal"><span class="pre">sign_out</span></tt> are created:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;sign_in&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SignInMojit&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;sign_out&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SignOutMojit&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="parent-mojit-with-child-mojit">
<h4>Parent Mojit With Child Mojit<a class="headerlink" href="#parent-mojit-with-child-mojit" title="Permalink to this headline">¶</a></h4>
<p>A mojit instance can be configured to have a child mojit using the <tt class="docutils literal"><span class="pre">child</span></tt> object.  To execute the child mojit,
the parent mojit would use the <tt class="docutils literal"><span class="pre">Composite</span> <span class="pre">addon</span></tt>. See <a class="reference external" href="../topics/mojito_composite_mojits.html#composite-mojits">Composite Mojits</a>
for more information.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the mojit instance <tt class="docutils literal"><span class="pre">parent</span></tt> of type <tt class="docutils literal"><span class="pre">ParentMojit</span></tt> has a child mojit of type <tt class="docutils literal"><span class="pre">ChildMojit</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ParentMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="parent-mojit-with-children">
<h4>Parent Mojit With Children<a class="headerlink" href="#parent-mojit-with-children" title="Permalink to this headline">¶</a></h4>
<p>A mojit instance can also be configured to have more than one child mojits using the <tt class="docutils literal"><span class="pre">children</span></tt> object that contains
mojit instances. To execute the children, the parent mojit would use the <tt class="docutils literal"><span class="pre">Composite</span> <span class="pre">addon</span></tt>. See <a class="reference external" href="../topics/mojito_composite_mojits.html#composite-mojits">Composite Mojits</a>
for more information.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below,
the mojit instance <tt class="docutils literal"><span class="pre">father</span></tt> of type <tt class="docutils literal"><span class="pre">ParentMojit</span></tt> has the children <tt class="docutils literal"><span class="pre">son</span></tt> and <tt class="docutils literal"><span class="pre">daughter</span></tt> of type <tt class="docutils literal"><span class="pre">ChildMojit</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;father&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ParentMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;son&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;daughter&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="child-mojit-with-children">
<h4>Child Mojit With Children<a class="headerlink" href="#child-mojit-with-children" title="Permalink to this headline">¶</a></h4>
<p>A parent mojit can have a single child that has its own children. The parent mojit specifies a child with the <tt class="docutils literal"><span class="pre">child</span></tt> object, which in
lists children in the <tt class="docutils literal"><span class="pre">children</span></tt> object. For the child to execute its children,it would use the <tt class="docutils literal"><span class="pre">Composite</span> <span class="pre">addon</span></tt>. See <a class="reference external" href="../topics/mojito_composite_mojits.html#composite-mojits">Composite Mojits</a>
for more information.</p>
<p>The example <tt class="docutils literal"><span class="pre">application.json</span></tt> below creates the parent mojit <tt class="docutils literal"><span class="pre">grandfather</span></tt> with the
child <tt class="docutils literal"><span class="pre">son</span></tt>, which has the children <tt class="docutils literal"><span class="pre">grandson</span></tt> and <tt class="docutils literal"><span class="pre">granddaughter</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;grandfather&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;GrandparenttMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;son&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span><span class="p">,</span>
              <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;grandson&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;GrandchildMojit&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;grandaughter&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;GrandchildMojit&quot;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-applications-to-be-deployed-to-client">
<span id="deploy-app"></span><h3>Configuring Applications to Be Deployed to Client<a class="headerlink" href="#configuring-applications-to-be-deployed-to-client" title="Permalink to this headline">¶</a></h3>
<p>To configure Mojito to deploy code to the client, you must be using the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt> as the parent mojit and also set the <tt class="docutils literal"><span class="pre">deploy</span></tt> property of the <a class="reference internal" href="#app-configuration-obj"><em>configuration Object</em></a> object
to <tt class="docutils literal"><span class="pre">true</span></tt> in the <tt class="docutils literal"><span class="pre">config</span></tt> object of your mojit instance.</p>
<div class="section" id="what-gets-deployed">
<h4>What Gets Deployed?<a class="headerlink" href="#what-gets-deployed" title="Permalink to this headline">¶</a></h4>
<p>The following is deployed to the client:</p>
<ul class="simple">
<li>Mojito framework</li>
<li>binders (and their dependencies)</li>
</ul>
<p>When a binder invokes its controller, if the controller has the <tt class="docutils literal"><span class="pre">client</span></tt> or <tt class="docutils literal"><span class="pre">common</span></tt> affinity, then the controller and its dependencies are deployed to the client as well. If the
affinity of the controller is <tt class="docutils literal"><span class="pre">server</span></tt>, the invocation occurs on the server. In either case, the binder is able to transparently invoke the  controller.</p>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The example <tt class="docutils literal"><span class="pre">application.json</span></tt> below uses the <tt class="docutils literal"><span class="pre">deploy</span></tt> field to configure the application to be deployed to the client.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;PagerMojit&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-application-configurations">
<span id="app-config-ex"></span><h3>Example Application Configurations<a class="headerlink" href="#example-application-configurations" title="Permalink to this headline">¶</a></h3>
<p>This example <tt class="docutils literal"><span class="pre">application.json</span></tt> defines the two mojit instances <tt class="docutils literal"><span class="pre">foo</span></tt> and <tt class="docutils literal"><span class="pre">bar</span></tt>. The <tt class="docutils literal"><span class="pre">foo</span></tt> mojit instance is of type <tt class="docutils literal"><span class="pre">MessageViewer</span></tt>, and the <tt class="docutils literal"><span class="pre">bar</span></tt> mojit instance uses <tt class="docutils literal"><span class="pre">foo</span></tt> as the base mojit.
Both have metadata configured in the <tt class="docutils literal"><span class="pre">config</span></tt> object.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;showConsoleInClient&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;fetchCSS&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;combine&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="s2">&quot;comboBase:&quot;</span> <span class="s1">&#39;http://mydomain.com/combo?&#39;</span><span class="p">,</span>
         <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="s1">&#39;yui3/&#39;</span>
       <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MessageViewer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hi&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;bar&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;base&quot;</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hello&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mojit-configuration">
<span id="configure-mj-mojit"></span><h2>Mojit Configuration<a class="headerlink" href="#mojit-configuration" title="Permalink to this headline">¶</a></h2>
<p>Although mojit instances are defined at the application level, you configure metadata and defaults for the mojit at the mojit level. The following sections will cover configuration at the mojit level
as well as examine the configuration of the mojit instance.</p>
<div class="section" id="configuring-metadata">
<h3>Configuring Metadata<a class="headerlink" href="#configuring-metadata" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">definition.json</span></tt> file in the mojit  directory is used to specify metadata about the mojit type. The contents of the file override the mojit type metadata that Mojito generates from the
contents of the file system.</p>
<p>The information is available from the controller using the <a class="reference external" href="http://devel.corp.yahoo.com/cocktails/mojito_api/Y.mojito.lib.Config.common.html">Config addon</a>. For  example, you would
use <tt class="docutils literal"><span class="pre">ac.config.getDefinition('version')</span></tt> to get the version information.</p>
<p>The table below describes the <tt class="docutils literal"><span class="pre">configuration</span></tt> object in <tt class="docutils literal"><span class="pre">definition.json</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="17%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">appLevel</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When set to <tt class="docutils literal"><span class="pre">true</span></tt>, the actions, addons, assets,
binders, models, and view of the mojit are
available to other mojits. Mojits wanting to use
the resources of application-level mojit must
include the YUI module of the application-level
mojit in the <tt class="docutils literal"><span class="pre">requires</span></tt> array.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">setting</span></tt></td>
<td>array of strings</td>
<td>&#8220;master&#8221;</td>
<td>The default value is &#8220;master&#8221;, which maps to the
default configurations for an application. You can
also provide a context to map to configurations.
See <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a> for more
information.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-and-using-and-application-level-mojit">
<h3>Configuring and Using and Application-Level Mojit<a class="headerlink" href="#configuring-and-using-and-application-level-mojit" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">definition.json</span></tt> file  lets you configure a mojit to be available at the application level, so that other mojits can use its actions, addons, assets, binders, models, and views. Mojits available
at the application level are not intended to be run alone, and some of its resources, such as the controller and configuration, are not available to other mojits.</p>
<p>To configure a mojit to be available at the application level, you set the <tt class="docutils literal"><span class="pre">appLevel</span></tt> field in <tt class="docutils literal"><span class="pre">definition.json</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt> as seen below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appLevel&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To use an application-level mojit, other mojits must include the YUI module name in the <tt class="docutils literal"><span class="pre">requires</span></tt> array of the controller. For example, to use the <tt class="docutils literal"><span class="pre">FooMojitModel</span></tt> module of the
application-level <tt class="docutils literal"><span class="pre">Foo</span></tt> mojit, the controller of the Bar mojit would include <tt class="docutils literal"><span class="pre">'FooMojitModel'</span></tt> in the <tt class="docutils literal"><span class="pre">requires</span></tt> array as seen below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;BarMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">mojito</span><span class="p">.</span><span class="nx">controller</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">config</span> <span class="o">=</span> <span class="nx">config</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actionContext</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">actionContext</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Body&quot;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;FooMojitModel&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-defaults-for-mojit-instances">
<h3>Configuring Defaults for Mojit Instances<a class="headerlink" href="#configuring-defaults-for-mojit-instances" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">defaults.json</span></tt> file in the mojit type directory can be used to specify defaults for each mojit instance of the type. The format is the same as the mojit instance as specified in the <tt class="docutils literal"><span class="pre">specs</span></tt> object
of <tt class="docutils literal"><span class="pre">application.json</span></tt>. This means that you can specify a default action, as well as any defaults you might want to put in the <tt class="docutils literal"><span class="pre">config</span></tt> object.</p>
</div>
<div class="section" id="mojit-instances">
<h3>Mojit Instances<a class="headerlink" href="#mojit-instances" title="Permalink to this headline">¶</a></h3>
<p>A mojit instance is made entirely of configuration. This configuration specifies which mojit type to use and configures an instance of that type. The mojit instances are defined  in  the <tt class="docutils literal"><span class="pre">specs</span></tt> object
of the <tt class="docutils literal"><span class="pre">application.json</span></tt> file.</p>
<p>See <a class="reference internal" href="#configure-mj-app"><em>Application Configuration</em></a> and <a class="reference internal" href="#app-config-ex"><em>Example Application Configurations</em></a> for  details of the <tt class="docutils literal"><span class="pre">specs</span></tt> object.</p>
<div class="section" id="using-mojit-instances">
<h4>Using Mojit Instances<a class="headerlink" href="#using-mojit-instances" title="Permalink to this headline">¶</a></h4>
<p>When a mojit instance is defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>, routing paths defined in <tt class="docutils literal"><span class="pre">routes.json</span></tt> can be associated with an action of that mojit instance. Actions are references to functions in the
mojit controllers. When a client makes an HTTP request on a defined routing path, the function in the mojit controller that is referenced by the action from the mojit instance is called.</p>
<p>For example, the <tt class="docutils literal"><span class="pre">application.json</span></tt> below defines the <tt class="docutils literal"><span class="pre">foo</span></tt> mojit instance of the mojit type <tt class="docutils literal"><span class="pre">Foo</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Foo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hi&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> below uses the <tt class="docutils literal"><span class="pre">foo</span></tt> instance to call the <tt class="docutils literal"><span class="pre">index</span></tt> action when an HTTP GET request is made on the root path. The <tt class="docutils literal"><span class="pre">index</span></tt> action references the <tt class="docutils literal"><span class="pre">index</span></tt> function in the controller
of the <tt class="docutils literal"><span class="pre">Foo</span></tt> mojit.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;foo index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="routing">
<h2>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h2>
<p>In Mojito, routing is the mapping of URLs to specific mojit actions. This section will describe the routing configuration file <tt class="docutils literal"><span class="pre">routes.json</span></tt> and the following two ways to configure routing:</p>
<ul class="simple">
<li>Map Routes to Specific Mojit Instances and Actions</li>
<li>Generate URLs from the Controller</li>
</ul>
<p>See   <a class="reference external" href="../code_exs/route_config.html">Code Examples: Configuring Routing</a> to learn how to configure routing in Mojito applications.</p>
<div class="section" id="routing-configuration-file">
<h3>Routing Configuration File<a class="headerlink" href="#routing-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file contains the routing configuration information. The configuration information is in JSON  and uses  YCB format. The JSON   consists of an array of one or more <tt class="docutils literal"><span class="pre">configuration</span></tt> objects that include <tt class="docutils literal"><span class="pre">route</span></tt> objects specifying route paths, parameters, HTTP methods, and actions.</p>
<p>The table below describes the fields of the <tt class="docutils literal"><span class="pre">route</span></tt> object of  <tt class="docutils literal"><span class="pre">routes.json</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="20%" />
<col width="14%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">call</span></tt></td>
<td>string</td>
<td>Yes</td>
<td>The mojit instance defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>
and the method that is called when an HTTP call is
made on the path specified by <tt class="docutils literal"><span class="pre">path</span></tt>. For
example, to call the <tt class="docutils literal"><span class="pre">index</span></tt> method from the
<tt class="docutils literal"><span class="pre">hello</span></tt> mojit instance, you would use the
following: <tt class="docutils literal"><span class="pre">call:</span> <span class="pre">&quot;hello.index&quot;</span></tt> An anonymous
mojit instance can also be created by prepending
&#8220;&#64;&#8221; to the mojit type. For example, the following
would create an anonymous mojit instance of type
<tt class="docutils literal"><span class="pre">HelloMojit</span></tt> and call the <tt class="docutils literal"><span class="pre">index</span></tt> action for
the <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> mojit: <tt class="docutils literal"><span class="pre">call:</span>
<span class="pre">&quot;&#64;HelloMojito.index&quot;</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">params</span></tt></td>
<td>string</td>
<td>No</td>
<td>Query string parameters that developers can
associate with a route path. The default value is
an empty string &#8220;&#8221;. For example: <tt class="docutils literal"><span class="pre">params:</span>
<span class="pre">&quot;name=Tom&amp;age=23&quot;</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">path</span></tt></td>
<td>string</td>
<td>Yes</td>
<td>The route path that is mapped to the action in the
<tt class="docutils literal"><span class="pre">call</span></tt> field. The route path can have variable
placeholders for the mojit instance and action
that are substituted by the mojit instance and
actions used in the <tt class="docutils literal"><span class="pre">call</span></tt> field.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">verbs</span></tt></td>
<td>array of strings</td>
<td>No</td>
<td>The HTTP methods allowed on the route path defined
by <tt class="docutils literal"><span class="pre">path</span></tt>. For example, to allow HTTP GET and
POST calls to be made on the specified path, you
would use the following: <tt class="docutils literal"><span class="pre">&quot;verbs&quot;:</span> <span class="pre">[</span> <span class="pre">&quot;get&quot;,</span>
<span class="pre">&quot;post&quot;</span> <span class="pre">]</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="map-routes-to-specific-mojit-instances-and-actions">
<h3>Map Routes to Specific Mojit Instances and Actions<a class="headerlink" href="#map-routes-to-specific-mojit-instances-and-actions" title="Permalink to this headline">¶</a></h3>
<p>This type of route configuration is the most sophisticated and recommended for production applications. To map routes to a mojit instance and action, you create the file <tt class="docutils literal"><span class="pre">routes.json</span></tt> in your application directory. The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file allows you to configure a single or multiple routes and specify the HTTP method and action to use for each route.</p>
<div class="section" id="single-route">
<h4>Single Route<a class="headerlink" href="#single-route" title="Permalink to this headline">¶</a></h4>
<p>To create a route, you need to create a mojit instance that can be mapped to a path. In the <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">hello</span></tt> instance of type <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> is created.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="mi">8666</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;hello&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HelloMojit&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">hello</span></tt> instance and a function in the <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> controller can now be mapped to a route path in <tt class="docutils literal"><span class="pre">routes.json</span></tt> file. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below, the <tt class="docutils literal"><span class="pre">index</span></tt> function is called when an HTTP GET call is made on the root path.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;hello index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;hello.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Instead of using the <tt class="docutils literal"><span class="pre">hello</span></tt> mojit instance defined in the <tt class="docutils literal"><span class="pre">application.json</span></tt> shown above, you can create an anonymous instance of <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> for mapping an action to a route path. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below,  an anonymous instance of <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> is made by prepending &#8220;&#64;&#8221; to the mojit type.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;hello index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@HelloMojit.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-routes">
<h4>Multiple Routes<a class="headerlink" href="#multiple-routes" title="Permalink to this headline">¶</a></h4>
<p>To specify multiple routes, you create multiple route objects that contain <tt class="docutils literal"><span class="pre">verb</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, and <tt class="docutils literal"><span class="pre">call</span></tt> fields in <tt class="docutils literal"><span class="pre">routes.json</span></tt> as seen here:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/*&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;foo_default&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;bar_default&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;bar-1.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file above creates the following routes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://localhost:8666</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/bar</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/anything</span></tt></li>
</ul>
<p>Notice that the <tt class="docutils literal"><span class="pre">routes.json</span></tt> above uses the two mojit instances <tt class="docutils literal"><span class="pre">foo-1</span></tt> and <tt class="docutils literal"><span class="pre">bar-1</span></tt>; these instances must be created in the <tt class="docutils literal"><span class="pre">application.json</span></tt> file before they can be mapped to a route path.
Also, the wildcard used in <tt class="docutils literal"><span class="pre">root</span></tt> object configures Mojito to call <tt class="docutils literal"><span class="pre">foo-1.index</span></tt> when HTTP GET calls are made on any undefined path.</p>
</div>
<div class="section" id="using-parameterized-paths-to-call-a-mojit-action">
<h4>Using Parameterized Paths to Call a Mojit Action<a class="headerlink" href="#using-parameterized-paths-to-call-a-mojit-action" title="Permalink to this headline">¶</a></h4>
<p>Your routing configuration can also use parameterized paths to call mojit actions. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below, the <tt class="docutils literal"><span class="pre">path</span></tt> property uses parameters to
capture a part of the matched URL and then uses that captured part to replace <tt class="docutils literal"><span class="pre">{{mojit-action}}</span></tt> in the value for the <tt class="docutils literal"><span class="pre">call</span></tt> property.  Any value
can be used for the parameter as long as it is prepended with a colon (e.g., <tt class="docutils literal"><span class="pre">:foo</span></tt>). After the parameter has been replaced by a value given in the path, the call to
the action should have the following syntax: <tt class="docutils literal"><span class="pre">{mojit_instance}.(action}</span></tt></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;_foo_action&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo/:mojit-action&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@foo-1.{mojit-action}&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;_bar_action&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/bar/:mojit-action&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@bar-1.{mojit-action}&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>For example, based on the <tt class="docutils literal"><span class="pre">routes.json</span></tt> above, an HTTP GET call made on the path <tt class="docutils literal"><span class="pre">http://localhost:8666/foo/index</span></tt> would call the <tt class="docutils literal"><span class="pre">index</span></tt> function
in the controller because the value of <tt class="docutils literal"><span class="pre">:mojit-action</span></tt> in the path (<tt class="docutils literal"><span class="pre">index</span></tt> in this case) would be then replace <tt class="docutils literal"><span class="pre">{mojit-action}}</span></tt> in the <tt class="docutils literal"><span class="pre">call</span></tt> property.
The following URLs call the <tt class="docutils literal"><span class="pre">index</span></tt> and <tt class="docutils literal"><span class="pre">myAction</span></tt> functions in the controller.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo/index</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo/myAction</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/bar/index</span></tt></li>
</ul>
</div>
<div class="section" id="generate-urls-from-the-controller">
<h4>Generate URLs from the Controller<a class="headerlink" href="#generate-urls-from-the-controller" title="Permalink to this headline">¶</a></h4>
<p>The Mojito JavaScript library contains the <a class="reference external" href="http://devel.corp.yahoo.com/cocktails/mojito_api/Url.common.html">Url addon</a> that allows you to create a URL with the mojit instance, the action, and parameters from the controller.</p>
<p>In the code snippet below from <tt class="docutils literal"><span class="pre">routes.json</span></tt>,  the mojit instance, the HTTP method, and the action are specified in the <tt class="docutils literal"><span class="pre">&quot;foo_default&quot;</span></tt> object.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;foo_default&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
  <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo&quot;</span><span class="p">,</span>
  <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this code snippet from <tt class="docutils literal"><span class="pre">controller.js</span></tt>,  the <a class="reference external" href="http://devel.corp.yahoo.com/cocktails/mojito_api/Url.common.html">Url addon</a> with the <tt class="docutils literal"><span class="pre">make</span></tt> method use the mojit instance  and function specified in the <tt class="docutils literal"><span class="pre">routes.json</span></tt> above to create the URL <tt class="docutils literal"><span class="pre">/foo</span></tt> with the query string parameters <tt class="docutils literal"><span class="pre">?foo=bar</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">...</span>
  <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ac</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">make</span><span class="p">(</span><span class="s1">&#39;foo-1&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">,{</span><span class="s1">&#39;foo&#39;</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">...</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">index</span></tt> function above returns the following URL: <tt class="docutils literal"><span class="pre">http://localhost:8666/foo?foo=bar</span></tt></p>
</div>
</div>
</div>
</div>

   </div>

YUI.add("mojito-view-renderer",function(Y){"use strict";var cache={};function Renderer(type,options){this._type=type||"hb";this._options=options;this._renderer=cache[type]}Renderer.prototype={_createEngine:function(callback){var my=this,viewEngines=Y.mojito.addons.viewEngines,fn=function(){callback(null,new viewEngines[my._type](my._options))};if(viewEngines[my._type]){fn()}else{Y.use("mojito-"+this._type,function(){if(!viewEngines[my._type]){callback(new Error("Invalid view engine: "+my._type));return}fn()})}},render:function(data,mojitType,tmpl,adapter,meta,more){var my=this;Y.mojito.hooks.hook("Render",adapter.hook,data,mojitType,tmpl,adapter,meta,more);if(!this._renderer){this._createEngine(function(err,engine){if(err){adapter.error(err);return}my._renderer=engine;cache[my._type]=engine;my._renderer.render(data,mojitType,tmpl,adapter,meta,more)})}else{this._renderer.render(data,mojitType,tmpl,adapter,meta,more)}}};Y.namespace("mojito").ViewRenderer=Renderer},"0.1.0",{requires:["mojito","mojito-hooks"]});
